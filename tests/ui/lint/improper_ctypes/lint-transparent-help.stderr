error: `repr(C)` type uses type `DictPhantom<'_, T, T>`, which is not FFI-safe
  --> $DIR/lint-transparent-help.rs:13:1
   |
LL | / struct MyTypedRawPointer<'a,T:'a>{
LL | |     ptr: *const c_void,
LL | |     metadata: DictPhantom<'a,T,T>,
LL | | }
   | |_^ not FFI-safe
   |
   = help: `MyTypedRawPointer<'_, T>` has exactly one non-zero-sized field, consider making it `#[repr(transparent)]` instead
   = note: this struct/enum/union (`MyTypedRawPointer<'_, T>`) is FFI-unsafe due to a `DictPhantom<'_, T, T>` field
note: the type is defined here
  --> $DIR/lint-transparent-help.rs:13:1
   |
LL | struct MyTypedRawPointer<'a,T:'a>{
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: consider adding a `#[repr(C)]` (not `#[repr(C,packed)]`) or `#[repr(transparent)]` attribute to `DictPhantom<'_, T, T>`
   = note: `DictPhantom<'_, T, T>` has unspecified layout
note: the type is defined here
  --> $DIR/lint-transparent-help.rs:7:1
   |
LL | struct DictPhantom<'a, A,B:'a>{
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: the lint level is defined here
  --> $DIR/lint-transparent-help.rs:1:36
   |
LL | #![deny(improper_c_fn_definitions, improper_ctype_definitions)]
   |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^

error: `extern` fn uses type `MyTypedRawPointer<'_, i32>`, which is not FFI-safe
  --> $DIR/lint-transparent-help.rs:18:31
   |
LL | extern "C" fn example_use(_e: MyTypedRawPointer<i32>) {}
   |                               ^^^^^^^^^^^^^^^^^^^^^^ not FFI-safe
   |
   = help: `MyTypedRawPointer<'_, i32>` has exactly one non-zero-sized field, consider making it `#[repr(transparent)]` instead
   = note: this struct/enum/union (`MyTypedRawPointer<'_, i32>`) is FFI-unsafe due to a `DictPhantom<'_, i32, i32>` field
note: the type is defined here
  --> $DIR/lint-transparent-help.rs:13:1
   |
LL | struct MyTypedRawPointer<'a,T:'a>{
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: consider adding a `#[repr(C)]` (not `#[repr(C,packed)]`) or `#[repr(transparent)]` attribute to `DictPhantom<'_, i32, i32>`
   = note: `DictPhantom<'_, i32, i32>` has unspecified layout
note: the type is defined here
  --> $DIR/lint-transparent-help.rs:7:1
   |
LL | struct DictPhantom<'a, A,B:'a>{
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: the lint level is defined here
  --> $DIR/lint-transparent-help.rs:1:9
   |
LL | #![deny(improper_c_fn_definitions, improper_ctype_definitions)]
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^

error: aborting due to 2 previous errors

